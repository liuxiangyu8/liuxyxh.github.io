function drop_item(e){var t=$("#dropdownMenu li").eq(e).children("a:eq(0)").text();$("#dropdownButton").text(t),data.default_prefix=data.all_prefix_urls[e],resolving()}function resolving(){var e=$(".video-box").width(),t=$("#video-url").val().trim();if(t){var a=data.default_prefix;$("#playerbox").attr("src",a+t),$("#playerbox").show(),$(".tuijian-container").hide();var r=parseInt(e/1.777);$(".video-box").css("height",r+"px"),$(".video-box").css("padding-top","0px");var i=(new Date).getTime();localStorage.setItem(i,t);var o="";o=window.location.href.indexOf("?")>-1?window.location.href.split("?")[0]:window.location.href,o+="?url="+t;var n={title:"",url:o};history.pushState(n,"",o),createPoster()}}function getUrlParam(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(t);return null!=a?unescape(a[2]):null}function convertCanvasToImage(e){var t=new Image;return t.src=e.toDataURL("image/png"),t}function getPixelRatio(e){var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t}function createPoster(){$("#qrcode").length&&$("#qrcode").qrcode({render:"canvas",width:150,height:150,text:window.location.href});var e=document.getElementsByTagName("canvas")[0],t=convertCanvasToImage(e);$("#qrcode").html(""),$("#qrcode").append(t),$("#qrcode img").attr("id","qrcode_img");var a=document.getElementById("mycanvas"),r=a.getContext("2d"),i=getPixelRatio(r),o=document.getElementById("qrcode_img"),n=navigator.userAgent,c=n.indexOf("Android")>-1||n.indexOf("Adr")>-1,d=!!n.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),l=498,g=parseInt(1.78*l);console.log(window.screen.width),(d||c)&&(l=window.screen.width-10,g=parseInt(1.78*l)),a.width=l*i,a.height=g*i;var s=150,h=150,p=l/2-s/2,u=g/4*3-h/2-20;(d||c)&&(s=120,h=120,p=l/2-s/2,u=g/4*3-h/2-15);var m=new Image;m.src="./static/img/haibao.png",m.crossOrigin="*",m.onload=function(){r.drawImage(m,0,0,l*i,g*i),r.drawImage(o,p*i,u*i,s*i,h*i);var e=new Image;e.src=a.toDataURL("images/png"),$("#haibao").html(""),$("#haibao").append(e),$("#haibao img").attr("width","100%"),$("#haibao img").attr("height","100%")}}var data={all_prefix_urls:["https://jx.xyflv.cc/?url=","https://yparse.jn1.cc/index.php?url=","https://jx.xmflv.com/?url="],default_prefix:"https://jx.xyflv.cc/?url="};(function(){$(".dropdown-toggle").dropdown(),$("#btn-play").click(function(){resolving()});var e=getUrlParam("url");e&&($("#video-url").val(e),resolving()),createPoster()})();